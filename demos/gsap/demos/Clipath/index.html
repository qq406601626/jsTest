<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            display: grid;
            place-items: center;
            padding: 0;
            margin: 0;
            min-height: 100svh;
            background: black;
        }

        #wrapper {
            width: 80%;
            clip-path: polygon(70% 0, 100% 0, 100% 100%, 70% 100%);
            aspect-ratio: 2/1;
            position: relative;
            transition: clip-path;
        }

        #wrapper:hover {
            clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
        }

        img {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="wrapper">
    <img src="img.png" width="1600" height="800" alt=""/>
</div>
</body>
<script type="importmap">
    {
        "imports":{
           "gsap":"../../lib/gsap/index.js",
           "scrollTrigger":"../../lib/gsap/ScrollTrigger.js"
        }
    }
</script>

<script type="module">
    import {gsap} from 'gsap'
    import scrollTrigger from 'scrollTrigger'

    gsap.registerPlugin(scrollTrigger)

    document.addEventListener("DOMContentLoaded", () => {
        // GSAP通过其CSS插件（CSSPlugin）能够识别并动画化几乎所有的CSS属性，包括clip-path。当GSAP检测到clip-path属性时，它会：
        // 解析属性值：将clip-path的几何函数（如circle()、polygon()等）分解为可动画化的数值参数
        // 创建补间动画：在起始值和结束值之间进行平滑插值计算
        // 实时更新DOM：通过JavaScript动态修改元素的style.clipPath属性
        // 2. 数值插值机制
        // GSAP的核心能力在于对数值进行精确的插值计算。对于clip-path的不同函数：
        // circle()：插值半径和圆心位置
        // polygon()：插值各个顶点的坐标值
        // inset()：插值各个边界的偏移量
        // ellipse()：插值水平和垂直半径
        gsap.timeline({
            repeat: -1,
            yoyo: true,
            repeatDelay: 1,
            defaults: {duration: 1, ease: "power4.inOut"}
        }).to("#wrapper", {
            "clip-path": "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"
        }).to("img", {scale: 1.1}, 0);

    })
</script>

</html>
