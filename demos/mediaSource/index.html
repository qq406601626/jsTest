
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
</head>
<body>
<video controls id="video" muted></video>
<script>
const $video = document.getElementById('video')
const mediaSource = new MediaSource()
var mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';
mediaSource.addEventListener('sourceopen',()=>{
  var sourceBuffer = mediaSource.addSourceBuffer(mimeCodec);
  var xhr = new XMLHttpRequest;
  xhr.open('get', '/demos/mediaSource/screenshot_2025-06-03_09-20-00.mp4');
  xhr.responseType = 'arraybuffer';
  xhr.onload = function () {
    sourceBuffer.addEventListener('updateend', function (_) {
      mediaSource.endOfStream();
      $video.play();
    });
    sourceBuffer.appendBuffer(xhr.response);
  };
  xhr.send()
})
$video.src =  URL.createObjectURL(mediaSource)
</script>
</body>
</html>

