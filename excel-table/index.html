<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .table-container {
            position: relative;
        }

        .table {

            table-layout: fixed;
            border-collapse: collapse;
            position: relative;
            z-index: 2;
        }

        .table.content-table {
            border: 1px solid #000000;
        }

        .table.line-table {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            border: 1px solid transparent;
        }

        .table.line-table * {
            color: transparent;
        }

        .col {
            border: 1px solid #000000;
            vertical-align: top;
            padding: 0;
        }

        .table.line-table .col{
            border: 1px solid transparent;
        }

        .cell {
        }

        .cell-item {
            font-size: 16px;
            line-height: 26px;
            word-break: break-all;
        }

        .empty-cell {
            height: 26px;
            position: relative;
        }

        .empty-cell:not(:last-child):after {
            content: '';
            display: block;
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 1px;
            background: #000000;
            /*background: #ff00ff;*/
        }
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                font-size: 16px;
            }

            * {
                -webkit-print-color-adjust: exact !important;
            }

            .table tbody tr {
                page-break-inside: avoid;
            }

            tr {
                /* 实现分页，行不撕裂的关键 */
                page-break-inside: avoid;
            }
            @page {
                size: A4 landscape; /* 可以使用常见的纸张尺寸如 A4、Letter、Legal 等 */
                margin-top: 5mm;
                margin-bottom: 5mm;
            }
        }
    </style>
    <script src="js/lodash.min.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/moment-duration-format.js"></script>
    <script src="js/echarts.min.js"></script>
</head>
<body>
<div class="table-container">
    <table class="table content-table">
        <colgroup>
            <col width="58">
            <col width="58">
            <col width="180">
            <col width="300">
            <col width="300">
        </colgroup>
        <thead>
        <tr class="row head-row">
            <th class="col">类型</th>
            <th class="col">年龄</th>
            <th class="col">标签</th>
            <th class="col">说明</th>
            <th class="col">说明2</th>
        </tr>
        </thead>
        <tbody>
        <tr class="row">
            <td class="col">
                <div class="cell">
                    <div class="cell-item">转出</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">37</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">刘患者 / 女 / 23岁</div>
                    <div class="cell-item">士大夫士大夫士大夫大师傅士大夫士大夫但是士大夫士大夫大师傅手动阀手动阀</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">出院于10:00,总计住8天。</div>
                    <div class="cell-item">士大夫大师傅</div>
                    <div class="cell-item">但是犯得上犯得上发射点发士大夫士大夫士大夫士大夫大师傅</div>
                    <div class="cell-item">的犯得上发射点犯得上犯得上犯得上犯得上士大夫士大夫大师傅士大夫大师傅士大夫是士大夫士大夫士大夫手动阀手动阀</div>
                    <div class="cell-item">得瑟得瑟</div>
                    <div class="cell-item">sdfsdfdfsdfsdfsdfsdfdsfsdfdsfdsfdsfdsfdsfds阿斯顿发射点发射点asdfdsfd啊士大夫士大夫但是犯得上房贷首付545646512314465</div>
                </div>
            </td>
            <td class="col">
                <div class="cell"></div>
            </td>
        </tr>
        <tr class="row">
            <td class="col">
                <div class="cell">
                    <div class="cell-item">死亡</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">23</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">张患者 / 女 / 56岁</div>
                </div>
            </td>
            <td class="col">
                <div class="cell"></div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">出院于10:00,总计住8天。</div>
                </div>
            </td>
        </tr>
        <tr class="row">
            <td class="col">
                <div class="cell">
                    <div class="cell-item">入院</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">11</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">
                        1:慕容患者 / 男 / 8个月15天
                    </div>
                    <div class="cell-item">
                        2:是东方红东方红记得发货的肌肤还得几十块士大夫士大夫士大夫撒旦发射点发射点士大夫大师傅
                    </div>
                    <div class="cell-item">
                        3:耳机孔就考虑即可v六撒旦范德萨范德萨发
                    </div>
                    <div class="cell-item">
                        4:似懂非懂
                    </div>
                    <div class="cell-item">
                        5:稍等
                    </div>
                    <div class="cell-item">
                        6:了
                    </div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">患者于10:00步行入院,1000岁,测体:T36.4℃,P56次/分,R20次/分,BP120/90mmHg,主诉:腹痛5天,已都冬天不能能自主进食
                    </div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">出院于10:00,总计住8天。</div>
                </div>
            </td>
        </tr>
        <tr class="row">
            <td class="col">
                <div class="cell">
                    <div class="cell-item">转出</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">37</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">刘患者 / 女 / 23岁</div>
                    <div class="cell-item">士大夫士大夫士大夫大师傅士大夫士大夫但是士大夫士大夫大师傅手动阀手动阀</div>
                </div>
            </td>
            <td class="col">
                <div class="cell">
                    <div class="cell-item">出院于10:00,总计住8天。</div>
                    <div class="cell-item">士大夫大师傅</div>
                    <div class="cell-item">但是犯得上犯得上发射点发士大夫士大夫士大夫士大夫大师傅</div>
                    <div class="cell-item">的犯得上发射点犯得上犯得上犯得上犯得上士大夫士大夫大师傅士大夫大师傅士大夫是士大夫士大夫士大夫手动阀手动阀</div>
                    <div class="cell-item">得瑟得瑟</div>
                    <div class="cell-item">sdfsdfdfsdfsdfsdfsdfdsfsdfdsfdsfdsfdsfdsfds阿斯顿发射点发射点asdfdsfd啊士大夫士大夫但是犯得上房贷首付545646512314465</div>
                </div>
            </td>
            <td class="col">
                <div class="cell"></div>
            </td>
        </tr>

        </tbody>
    </table>
</div>
</body>
<script>
    class CellTable{
        constructor() {
            this.rowHeight = 26
            this.fontSize = 16

        }
        initLineTable(){
            const $contentTable = document.querySelector('.table.content-table')
            const contentTableRows = $contentTable.querySelectorAll('tbody .row')
            const $lineTable = $contentTable.cloneNode(true)
            $lineTable.className = 'table line-table'
            const lineTableRows = $lineTable.querySelectorAll('tbody .row')
            contentTableRows.forEach((row,index)=>{
                const maxRowHeight = this.getRowMaxHeight(row)
                const $lineTableRowCellHtml = '<div class="empty-cell"></div>'.repeat(maxRowHeight/this.rowHeight)
                const setCell = (cell)=>{
                    cell.innerHTML = $lineTableRowCellHtml
                }
                this.loopRowCell(lineTableRows[index],setCell)
            })
            document.querySelector('.table-container').appendChild($lineTable)
        }
        loopRowCell(row,cb){
            [...(row.children||[])].forEach(td=>{
                cb(td.children[0])
            })
        }
        getRowMaxHeight(row){
            let maxHeight = 0
            const getCellHeight = (cell)=>{
                const {scrollHeight} = cell
                if(scrollHeight>maxHeight){
                    maxHeight = scrollHeight
                }
            }
            this.loopRowCell(row,getCellHeight)
            return maxHeight
        }
    }
    window.onload = () => {
        const cellTable = new CellTable()
        cellTable.initLineTable()
    }
</script>

</html>
